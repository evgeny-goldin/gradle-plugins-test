
buildscript {
    repositories { mavenLocal(); maven { url 'http://evgenyg.artifactoryonline.com/evgenyg/repo/' }}
    dependencies { classpath 'com.github.goldin.plugins.gradle:node:0.2-SNAPSHOT' }
}


defaultTasks 'clean', 'cleanModules', 'start', 'stop'

subprojects {
    apply plugin: 'node'
    clean.doFirst {
        if ( System.getProperty( 'cleanNode' ) != null )
        {
            final deleteFiles = [ new File( System.getProperty( 'user.home' ), '.npm' ),
                                  new File( System.getProperty( 'user.home' ), '.nvm' ) ]

            println "Deleting $deleteFiles"
            project.delete( deleteFiles )
        }
    }
}

project ( 'coffee' ) {
    node { scriptPath = 'server.coffee' }
}

task wrapper( type: Wrapper ) { gradleVersion = '1.3' }

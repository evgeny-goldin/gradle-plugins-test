
apply plugin: 'idea'
apply plugin: 'groovy'
apply plugin: 'kotlin'
apply plugin: 'about'
apply plugin: 'duplicates'
apply plugin: 'teamcity'



defaultTasks 'clean', 'build', 'about', 'duplicates'


group   = 'com.github.goldin.plugins'
version = '0.1-SNAPSHOT'


idea.project {
    jdkName = '1.6'
    ipr.withXml { provider -> provider.node.component.find { it.@name == 'VcsDirectoryMappings' }.mapping.@vcs = 'Git' }
}


idea.module {

    downloadSources = true
    downloadJavadoc = true

    iml.withXml {
        provider ->
        provider.node.component.content.first().with {
            appendNode( 'excludeFolder', [ url : 'file://$MODULE_DIR$/gradle' ])
            appendNode( 'excludeFolder', [ url : 'file://$MODULE_DIR$/out'    ])
        }
    }
}


buildscript {

    final pluginsVersion = '0.1.4-SNAPSHOT'

    repositories {
        mavenLocal()
        mavenRepo url: 'http://evgenyg.artifactoryonline.com/evgenyg/repo/'
    }

    dependencies {
        classpath "com.github.goldin.plugins:gradle:$pluginsVersion",
                  "com.github.goldin.plugins:kotlin:$pluginsVersion",
                  "com.github.goldin.plugins:teamcity:$pluginsVersion"
    }
}


repositories {
    mavenRepo url: 'http://evgenyg.artifactoryonline.com/evgenyg/repo/'
}



dependencies {
    compile     'com.github.goldin.rest:youtrack:0.1-SNAPSHOT'
    testCompile ( 'junit:junit:4.10' ){ exclude group: 'org.hamcrest' }
}


task wrapper( type: Wrapper ) { gradleVersion = '1.0' }
